---
layout: piecrust_code
title: Running PieCrust
---

Here's some developer information on how **PieCrust** is run.

The simplest way to bootstrap **PieCrust** is to put these lines in your site's
`index.php` (assuming you have the [recommended directory structure][struct]...
otherwise, adjust the `require` path):

{% geshi 'php' %}
require '../_piecrust/piecrust.php';
piecrust_run();
{% endgeshi %}

The `piecrust_run` method does the following:

* Check PHP's version (you need PHP v5.3 or above).
* Set the include paths, the error and shutdown handlers, and a few other PHP environment things.
* Set up **PieCrust**'s class autoloader.
* Run **PieCrust** with the default options (_i.e._ using the current server request URL, etc.)

If you want to bootstrap **PieCrust** yourself, you should run `piecrust_setup`, which takes
care of all the steps described above except for the last one.

Then you can run the app with the following code:

{% geshi 'php' %}
$app = new PieCrust\PieCrust($parameters);
$app->run($uri, $server);
{% endgeshi %}

The `$parameters` variable should be an associative array with any of the following:

* `root` (defaults the the directory of the entry PHP script): the root of the website, where `_content` lives.
* `cache` (defaults to `true`): whether or not to enable [caching][].
* `debug` (defaults to `false`): whether or not to enable [debug mode][debug].

Finally, the `run` method takes 2 arguments:

1. The URI to process (it defaults to the current request's URL if `null`).
1. The server variables (it defaults to PHP's `$_SERVER` if `null`).


  [struct]: {{ pcurl('piecrust/doc/debugging') }}
  [caching]: {{ pcurl('piecrust/doc/caching') }}
  [debug]: {{ pcurl('piecrust/doc/structure') }}
